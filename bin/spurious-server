#!/usr/bin/env ruby

$: << File.join(File.dirname(__FILE__), '..', 'lib')
require 'spurious/server'
require 'daemons'
require "spurious/server/version"
require "eventmachine"
require "spurious/server/app"

Daemons.run_proc(
  'Spurious Server', # name of daemon
  :dir => '/tmp', # directory where pid file will be stored
  :log_output => true
) do
  Docker.url = 'http://0.0.0.0:2375'
  EventMachine.run {
    EventMachine.start_server '0.0.0.0', 4590, Spurious::Server::App
  }
end
